---
title: Set up a Splunk connector
og:title: Set up a Splunk connector - ConductorOne docs
og:description: Integrate your Splunk Enterprise server with ConductorOne to run user access reviews, enable just-in-time access requests, and easily provision and deprovision access.
description: ConductorOne provides identity governance and just-in-time provisioning for Splunk Enterprise. Integrate your Splunk Enterprise server with ConductorOne to run user access reviews (UARs), enable just-in-time access requests, and automatically provision and deprovision access.
sidebarTitle: Splunk
---

<Tip>
**Are you a Splunk Cloud user?** This page has instructions for integrating ConductorOne with Splunk Enterprise. If you want to integrate ConductorOne with your Splunk Cloud instance, follow the instructions in the [Splunk connector's README file](https://github.com/ConductorOne/baton-splunk#readme).
</Tip>

## Capabilities

| Resource     | Sync | Provision |
| ------------ | ---- | --------- |
| Accounts     | <Icon icon="square-check" iconType="solid"  color="#65DE23"/>   |           |       
| Deployments       | <Icon icon="square-check" iconType="solid"  color="#65DE23"/>    |   | 
| Roles     | <Icon icon="square-check" iconType="solid"  color="#65DE23"/>    |   |
| Capabilities     | <Icon icon="square-check" iconType="solid"  color="#65DE23"/>    |   |
| Applications     | <Icon icon="square-check" iconType="solid"  color="#65DE23"/>    |   |

## Gather Splunk credentials 

Configuring the connector requires you to pass in credentials generated in Splunk. Gather these credentials before you move on. 

<Tip>
**Before you begin:** 

1. Prepare a Splunk Enterprise image for the `baton-splunk` connector by following the Splunk Enterprise documentation to [Deploy and run Splunk Enterprise inside a Docker container](https://docs.splunk.com/Documentation/Splunk/latest/Installation/DeployandrunSplunkEnterpriseinsideDockercontainers). Note that the Splunk Docker image only supports **x86_64 CPU** architecture.

2. Make sure that [token authentication is enabled](https://docs.splunk.com/Documentation/Splunk/latest/Security/EnableTokenAuth) for your Splunk Enterprise instance. 
</Tip>

### Generate an API token

Splunk Enterprise authentication tokens inherit the same permission set as the user associated with the token. Make sure that the user associated with the token you create has permission to read all users, roles, deployments, capabilities, and applications for your instance. 

If you want to create tokens for yourself, your account must have a role that has the `edit_tokens_own` capability. If you want to create tokens for another user on the instance (such as a service account), your account must have a role that has the `edit_tokens_all` capability. 

<Steps>
<Step>
Sign into Splunk Enterprise. 
</Step>
<Step>
Click **Settings** and select **Tokens** from the menu. 
</Step>
<Step>
If necessary, click **Enable Token Authentication**. 
</Step>
<Step>
On the **Tokens** page, click **New Token**. 
</Step>
<Step>
Fill out the form and click **Create**. 
</Step>
<Step>
The token is generated. Carefully copy and save the token value. 
</Step>
</Steps>
**That's it!** Next, move on to the connector configuration instructions. 

## Configure the Splunk connector 

<Warning>
To complete this task, you'll need:

- The **Connector Administrator** or **Super Administrator** role in ConductorOne
- Access to the set of Splunk credentials generated by following the instructions above
</Warning>

<Tabs>
<Tab title="Cloud-hosted">
**Follow these instructions to use a built-in, no-code connector hosted by ConductorOne.**

*Cloud-hosted connector not currently available.*

</Tab>
<Tab title="Self-hosted">
**Follow these instructions to use the [Splunk](https://github.com/ConductorOne/baton-splunk) connector, hosted and run in your own environment.**  

When running in service mode on Kubernetes, a self-hosted connector maintains an ongoing connection with ConductorOne, automatically syncing and uploading data at regular intervals. This data is immediately available in the ConductorOne UI for access reviews and access requests.

### Step 1: Set up a new Splunk connector

<Steps>
<Step>
In ConductorOne, navigate to **Connectors** > **Add connector**.
</Step>
<Step>
Search for **Baton** and click **Add**.
</Step>
<Step>
Choose how to set up the new Splunk connector: 

   * Add the connector to a currently unmanaged app (select from the list of apps that were discovered in your identity, SSO, or federation provider that aren't yet managed with ConductorOne)

   * Add the connector to a managed app (select from the list of existing managed apps)

   * Create a new managed app
</Step>
<Step>
Set the owner for this connector. You can manage the connector yourself, or choose someone else from the list of ConductorOne users. Setting multiple owners is allowed. 

   If you choose someone else, ConductorOne will notify the new connector owner by email that their help is needed to complete the setup process.
</Step>
<Step>
Click **Next**.
</Step>
<Step>
In the **Settings** area of the page, click **Edit**.
</Step>
<Step>
Click **Rotate** to generate a new Client ID and Secret. 

   Carefully copy and save these credentials. We'll use them in Step 2. 
</Step>
</Steps>

### Step 2: Create Kubernetes configuration files

Create two Kubernetes manifest files for your Splunk connector deployment:

#### Secrets configuration

```yaml
# baton-splunk-secrets.yaml
apiVersion: v1
kind: Secret
metadata:
  name: baton-splunk-secrets
type: Opaque
stringData:
  # ConductorOne credentials
  BATON_CLIENT_ID: <ConductorOne client ID>
  BATON_CLIENT_SECRET: <ConductorOne client secret>
  
  # Splunk credentials
  BATON_TOKEN: <Splunk API token>
  BATON_PASSWORD: <Password to the Splunk account>
  BATON_USERNAME: <Username for the Splunk account>

  # Optional: include if you want to list Application and Capability entitlements and grants
  BATON_VERBOSE: true

  # Optional: include if you want to allow insecure TLS connections to Splunk
  BATON_UNSAFE: true
```

See the connector's README or run `--help` to see all available configuration flags and environment variables.

#### Deployment configuration

```yaml expandable
# baton-splunk.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: baton-splunk
  labels:
    app: baton-splunk
spec:
  selector:
    matchLabels:
      app: baton-splunk
  template:
    metadata:
      labels:
        app: baton-splunk
        baton: true
        baton-app: splunk
    spec:
      containers:
      - name: baton-splunk
        image: ghcr.io/conductorone/baton-splunk:latest
        imagePullPolicy: IfNotPresent
        env:
        - name: BATON_HOST_ID
          value: baton-splunk
        envFrom:
        - secretRef:
            name: baton-splunk-secrets
```

### Step 3: Deploy the connector

<Steps>
<Step>
Create a namespace in which to run ConductorOne connectors (if desired), then apply the secret config and deployment config files. 
</Step>
<Step>
Check that the connector data uploaded correctly. In ConductorOne, click **Applications**. On the **Managed apps** tab, locate and click the name of the application you added the Splunk connector to. Splunk data should be found on the **Entitlements** and **Accounts** tabs.
</Step>
</Steps>

**That's it!** Your Splunk connector is now pulling access data into ConductorOne.
</Tab>
</Tabs>






