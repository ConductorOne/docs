---
title: "Set up a Google Cloud Platform with Google Workspace connector"
og:title: "Set up a Google Cloud Platform with Google Workspace connector"
description: "ConductorOne provides identity governance and just-in-time provisioning for Google Cloud Platform with Google Workspace. Integrate your Google Cloud Platform with Google Workspace instance with ConductorOne to run user access reviews (UARs) and enable just-in-time access requests."
og:description: "ConductorOne provides identity governance and just-in-time provisioning for Google Cloud Platform with Google Workspace. Integrate your Google Cloud Platform with Google Workspace instance with ConductorOne to run user access reviews (UARs) and enable just-in-time access requests."
sidebarTitle: "Google Cloud Platform with Google Workspace"
---

## Capabilities

| Resource                            | Sync                  | Provision             |
| :--- | :--- | :--- |
| Accounts                            | <Icon icon="square-check" iconType="solid"  color="#65DE23"/> |                       |
| Groups                              | <Icon icon="square-check" iconType="solid"  color="#65DE23"/> | <Icon icon="square-check" iconType="solid"  color="#65DE23"/> |
| Folders                             | <Icon icon="square-check" iconType="solid"  color="#65DE23"/> | <Icon icon="square-check" iconType="solid"  color="#65DE23"/> |
| Roles                               | <Icon icon="square-check" iconType="solid"  color="#65DE23"/> | <Icon icon="square-check" iconType="solid"  color="#65DE23"/> |
| Projects                            | <Icon icon="square-check" iconType="solid"  color="#65DE23"/> | <Icon icon="square-check" iconType="solid"  color="#65DE23"/> |
| Organizations                       | <Icon icon="square-check" iconType="solid"  color="#65DE23"/> |                       |
| Workforce Identity pools\*          | <Icon icon="square-check" iconType="solid"  color="#65DE23"/> |                       |
| Workforce Identity pool providers\* | <Icon icon="square-check" iconType="solid"  color="#65DE23"/> |                       |
| Secrets - API keys                  | <Icon icon="square-check" iconType="solid"  color="#65DE23"/> |                       |
| Secrets - Service account keys      | <Icon icon="square-check" iconType="solid"  color="#65DE23"/> |                       |
| Secrets - Secret Manager secrets    | <Icon icon="square-check" iconType="solid"  color="#65DE23"/> |                       |
| Buckets                             | <Icon icon="square-check" iconType="solid"  color="#65DE23"/> |                       |


\*Workforce Identity Federation support is optional and must be configured when you set up the connector.

[This connector can sync secrets](/product/admin/inventory) and display them on the **Inventory** page.

## Gather Google Cloud Platform with Google Workspace credentials

Configuring the connector requires you to pass in credentials generated in Google Cloud Platform with Google Workspace. Gather these credentials before you move on.

<Warning>
  A user with the **Super Admin** role in Google Cloud Platform with Google
  Workspace must perform this task.
</Warning>

### Create a new project

<Steps>
<Step>
As a Google Cloud Platform with Google Workspace Super Admin, sign in to [https://console.cloud.google.com](https://console.cloud.google.com/).
</Step>
<Step>
In the toolbar, click the project select dropdown, and click **NEW PROJECT**.

<Frame>
  <img src="/images/product/assets/google-1.png" alt="" />
</Frame>

{" "}
<Frame>
  <img src="/images/product/assets/google-2.png" alt="" />
</Frame>
</Step>
<Step>
Create a new project for your organization:

- **Project Name**: Choose a name, such as "ConductorOne Integration"
- **Organization/Location**: Choose the appropriate Organization/Location

   <Frame>
   <img src="/images/product/assets/google-3.png" alt="" />
   </Frame>
</Step>
<Step>
After the project is created, make sure the correct project is selected in the dropdown at the top.

<Frame>
  <img src="/images/product/assets/google-4.png" alt="" />
</Frame>
</Step>
</Steps>
### Enable the API

<Steps>
<Step>
In the navigation menu, navigate to > **APIs & Services** > **Library**.
</Step>
<Step>
Search for and select the Admin SDK API.

   <Frame>
   <img src="/images/product/assets/google-6.png" alt="" />
   </Frame>
</Step>
<Step>
Click **Enable**.

   <Frame>
   <img src="/images/product/assets/google-7.png" alt="" />
   </Frame>
</Step>
</Steps>

<Tip>
To be able to sync all secrets types and buckets, you must also grant the required permissions for each resource at the organization level, and enable APIs for each project that the connector syncs.

If you are using the optional **Project IDs** filter, you only need to enable the APIs for the specified projects.

Enable these APIs in order to sync secrets and buckets:

* Secrets - API Keys: **API Keys API**
* Secrets - Service account keys: **IAM API**
* Secrets - Secret Manager secrets: **Secret Manager API**
* Buckets: **Cloud Storage API**
</Tip>

### Create a service account

<Steps>
<Step>
In the navigation menu, navigate to > **APIs & Services** > **Credentials**.
</Step>
<Step>
Select **CREATE CREDENTIALS** > **Service Account**.
</Step>
<Step>
Under **Service account details**, fill in the following:

- **Service account name:** ConductorOne Integration
- **Service account description:** for example, "Service account for ConductorOne Google Cloud Platform with Google Workspace Integration"

Click **CREATE AND CONTINUE**.

</Step>
<Step>
Under **Grant this service account access to a project**, grant the following permissions to either the **Editor** role or a custom role on the org level, and assign that role to the service account:
</Step> 
<Step>
   You'll need these permissions to give ConductorOne **READ** access (syncing access data):

```bash
cloudasset.assets.analyzeIamPolicy
cloudasset.assets.searchAllIamPolicies
cloudasset.assets.searchAllResources
iam.roles.get
iam.roles.list
resourcemanager.folders.getIamPolicy
resourcemanager.folders.list
resourcemanager.organizations.get
resourcemanager.organizations.getIamPolicy
resourcemanager.projects.get
resourcemanager.projects.getIamPolicy
resourcemanager.projects.list
apikeys.keys.list
iam.serviceAccounts.list
iam.serviceAccountKeys.list
secretmanager.secrets.get
secretmanager.secrets.list
secretmanager.secrets.getIamPolicy
storage.buckets.list
storage.buckets.getIamPolicy
```

You'll need these permissions to give ConductorOne **READ/WRITE** access (syncing access data and provisioning access):

```bash
cloudasset.assets.analyzeIamPolicy
cloudasset.assets.searchAllIamPolicies
cloudasset.assets.searchAllResources
iam.roles.get
iam.roles.list
resourcemanager.folders.getIamPolicy
resourcemanager.folders.list
resourcemanager.folders.setIamPolicy
resourcemanager.organizations.get
resourcemanager.organizations.getIamPolicy
resourcemanager.organizations.setIamPolicy
resourcemanager.projects.get
resourcemanager.projects.getIamPolicy
resourcemanager.projects.list
resourcemanager.projects.setIamPolicy
apikeys.keys.list
iam.serviceAccounts.list
iam.serviceAccountKeys.list
secretmanager.secrets.get
secretmanager.secrets.list
secretmanager.secrets.getIamPolicy
secretmanager.secrets.setIamPolicy
storage.buckets.list
storage.buckets.getIamPolicy
storage.buckets.setIamPolicy
```

</Step>
<Step>
Leave **Grant users access to this service account** blank.
</Step>
<Step>
Click **DONE**.
</Step>
</Steps>

### Get credentials

<Steps>
<Step>
Navigate back to **APIs & Services** > **Credentials** and select the service account you just created.

{" "}
<Frame>
  <img src="/images/product/assets/google-13.png" alt="" />
</Frame>

  <Frame>
  <img src="/images/product/assets/google-14.png" alt="" />
  </Frame>
</Step>
<Step>
Click the service account's email address. Locate and save the **Unique ID**.

  <Frame>
  <img src="/images/product/assets/gworkspace-1.png" alt="" />
  </Frame>
</Step>
<Step>
On the **Service Account Details Page**, click **KEYS**.

  <Frame>
  <img src="/images/product/assets/google-15.png" alt="" />
  </Frame>
</Step>
<Step>
Click **ADD KEY** > **Create new key**.
</Step>
<Step>
Choose **JSON** and click **CREATE**. The new key is created and downloaded to your computer.
</Step>
<Step>
Keep the downloaded file safe, you'll use it to set up the connector.
</Step>
</Steps>

### Add the service account to Google Cloud Platform with Google Workspace

<Steps>
<Step>
Go to [https://admin.google.com](https://admin.google.com) as a **SUPER ADMIN**.
</Step>
<Step>
In the navigation menu, select **Security** > **Access and data control** > **API Controls**.
</Step>
<Step>
Click **MANAGE DOMAIN WIDE DELEGATION**.

  <Frame>
  <img src="/images/product/assets/gworkspace-2.png" alt="" />
  </Frame>
</Step>
<Step>
Click **Add new** and fill out the form:

- **Client ID**: The saved ID
- **OAuth Scopes**: Copy and paste in the relevant scopes

        - Use the following scopes to give ConductorOne **READ** access (syncing access data):

           ```bash
           https://www.googleapis.com/auth/admin.directory.user.alias.readonly,https://www.googleapis.com/auth/admin.directory.rolemanagement.readonly,https://www.googleapis.com/auth/admin.directory.group.member.readonly,https://www.googleapis.com/auth/admin.directory.group.readonly,https://www.googleapis.com/auth/admin.directory.user.readonly,https://www.googleapis.com/auth/admin.directory.domain.readonly,https://www.googleapis.com/auth/admin.reports.audit.readonly
           ```

       - Use the following scopes to give ConductorOne **READ/WRITE** access (syncing access data and provisioning access):

         ```bash
         https://www.googleapis.com/auth/admin.directory.user.alias.readonly,https://www.googleapis.com/auth/admin.directory.rolemanagement,https://www.googleapis.com/auth/admin.directory.group.member,https://www.googleapis.com/auth/admin.directory.group,https://www.googleapis.com/auth/admin.directory.user.readonly,https://www.googleapis.com/auth/admin.directory.domain.readonly,https://www.googleapis.com/auth/admin.reports.audit.readonly
         ```

</Step>
<Step>
Click **AUTHORIZE**.

   <Frame>
   <img src="/images/product/assets/gworkspace-3.png" alt="" />
   </Frame>
</Step>
<Step>
In the navigation menu, select **Account > Account Settings**.
</Step>
<Step>
Copy and save the **Customer ID** from this page.

  <Frame><img src="/images/product/assets/gworkspace-4.png" alt=""/></Frame>
</Step>
</Steps>

### Locate your primary domain

<Steps>
<Step>
In the navigation panel on the left, click **Account** > **Domains**.
</Step>
<Step>
Click **Manage Domains**. Locate and copy the domain labeled as the **Primary Domain** in the **Type** column.

  <Frame>
  <img src="/images/product/assets/gworkspace-5.png" alt="" />
  </Frame>
</Step>
</Steps>

**That's it!** Next, move on to the connector configuration instructions.

## Configure the Google Cloud Platform with Google Workspace connector

<Warning>
To complete this task, you'll need:

- The **Connector Administrator** or **Super Administrator** role in ConductorOne
- Access to the set of Google Cloud Platform with Google Workspace credentials generated by following the instructions above
</Warning>

<Tabs>
<Tab title="Cloud-hosted">
**Follow these instructions to use a built-in, no-code connector hosted by ConductorOne.**

<Steps>
<Step>
In ConductorOne, navigate to **Integrations** > **Connectors** and click **Add connector**.
</Step>
<Step>
Search for **Google Cloud Platform with Google Workspace** and click **Add**.
</Step>
<Step>
Choose how to set up the new Google Cloud Platform with Google Workspace connector:

- Add the connector to a currently unmanaged app (select from the list of apps that were discovered in your identity, SSO, or federation provider that aren't yet managed with ConductorOne)

- Add the connector to a managed app (select from the list of existing managed apps)

- Create a new managed app
</Step>
<Step>
Set the owner for this connector. You can manage the connector yourself, or choose someone else from the list of ConductorOne users. Setting multiple owners is allowed.

If you choose someone else, ConductorOne will notify the new connector owner by email that their help is needed to complete the setup process.

</Step>
<Step>
Click **Next**.
</Step>
<Step>
Find the **Settings** area of the page and click **Edit**.
</Step>
<Step>
In the **Customer ID** field, enter the customer ID.
</Step>
<Step>
In the **Domain** field, enter the primary domain.
</Step>
<Step>
In the **Administrator email** field, enter the email address associated with your domain or a super admin.
</Step>
<Step>
In the **Credentials (JSON)** area, click **Choose file** and upload the file.
</Step>
<Step>
**Optional.** Check the box if you want to skip syncing Google Cloud Platform system accounts.
</Step>
<Step>
**Optional.** Uncheck the box (which is checked by default) if you want to sync Google Cloud Platform default projects.
</Step>
<Step>
**Optional.** In the **Project IDs** field, enter a list of project IDs to limit the connector's sync to only those projects. Be sure to enter project IDs, not project names.
</Step>
<Step>
**Optional.** Check the box to **Enable Workforce Identity Federation**, which allows the connector to sync Workforce Identity pools and pool providers.

- If you want the connector to provision Workforce Identity pools, enter the relevant **Workforce Identity Pool ID** and **Workforce Identity Pool Provider ID** in the relevant fields.
</Step>
<Step>
By default, the connector only syncs roles that are assigned to an IAM policy. These settings allow you to configure the connector to sync roles regardless of their IAM policy status.


    1. **Optional.** Check the box to **Always sync custom roles**.

    1. **Optional.** In the **List of role IDs to always sync** field, enter a list of role IDs that should be synced. Be sure to enter role IDs, not role names.

</Step>
<Step>
Click **Save**.
</Step>
<Step>
**If enabling Workforce Identity Federation**, complete these additional steps:

1.  In the **Shared identity source** area of the page, click **Edit**.

2.  Select the connector from which you want to pull identities.

3.  **Optional.** Limit the identities pulled from the connector you selected to only those with a certain entitlement by setting the entitlement.

4.  Click **Save**.
</Step>
<Step>
The connector's label changes to **Syncing**, followed by **Connected**. You can view the logs to ensure that information is syncing.
</Step>
</Steps>

**That's it!** Your Google Cloud Platform with Google Workspace connector is now pulling access data into ConductorOne.

</Tab>

<Tab title="Self-hosted">
**Follow these instructions to use the Google Cloud Platform with Google Workspace connector, hosted and run in your own environment.**

_Self-hosted connector not currently available._

</Tab>
</Tabs>


