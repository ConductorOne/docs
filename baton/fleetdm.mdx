---
title: "Set up a FleetDM connector"
og:title: "Set up a FleetDM connector"
description: "ConductorOne provides identity governance and just-in-time provisioning for FleetDM. Integrate your FleetDM instance with ConductorOne to run user access reviews (UARs) and enable just-in-time access requests."
og:escription: "ConductorOne provides identity governance and just-in-time provisioning for FleetDM. Integrate your FleetDM instance with ConductorOne to run user access reviews (UARs) and enable just-in-time access requests."
sidebarTitle: "FleetDM"
---

## Capabilities

| Resource | Sync | Provision |
| :--- | :--- | :--- |
| Accounts | <Icon icon="square-check" iconType="solid"  color="#65DE23"/> | <Icon icon="square-check" iconType="solid"  color="#65DE23"/> |
| Teams* | <Icon icon="square-check" iconType="solid"  color="#65DE23"/> | <Icon icon="square-check" iconType="solid"  color="#65DE23"/> |
| Hosts | <Icon icon="square-check" iconType="solid"  color="#65DE23"/> |  |

*Teams support is available only for FleetDM Premium.

The FleetDM connector supports [automatic account provisioning and deprovisioning](/product/admin/account-provisioning). 

## Gather FleetDM credentials 

Configuring the connector requires you to pass in credentials generated in FleetDM. Gather these credentials before you move on.   

Here's the set of credentials you'll need when setting up the connector:  

- FleetDM instance URL
- [An API token](https://fleetdm.com/docs/rest-api/rest-api#retrieve-your-api-token) **OR** the username and password for your account or for a service account 

Note that the user account associated with the API token or the username and password must have the **Admin** global role in order for all information to be available to the connector. API-only users with the Admin global role are recommended, as the API tokens for these users do not expire. 

**That's it!** Next, move on to the connector configuration instructions. 

## Configure the FleetDM connector

<Warning>
To complete this task, you'll need:

- The **Connector Administrator** or **Super Administrator** role in ConductorOne
- Access to the set of FleetDM credentials generated by following the instructions above
</Warning>

<Tabs>
<Tab title="Cloud-hosted">
**Follow these instructions to use a built-in, no-code connector hosted by ConductorOne.**
<Steps>
<Step>
In ConductorOne, navigate to **Admin** > **Connectors** and click **Add connector**.
</Step>
<Step>
Search for **FleetDM** and click **Add**. 
</Step>
<Step>
Choose how to set up the new FleetDM connector: 

   - Add the connector to a currently unmanaged app (select from the list of apps that were discovered in your identity, SSO, or federation provider that aren't yet managed with ConductorOne)

   - Add the connector to a managed app (select from the list of existing managed apps)

   - Create a new managed app
</Step>
<Step>
Set the owner for this connector. You can manage the connector yourself, or choose someone else from the list of ConductorOne users. Setting multiple owners is allowed. 

   If you choose someone else, ConductorOne will notify the new connector owner by email that their help is needed to complete the setup process.
</Step>
<Step>
Click **Next**.
</Step>
<Step>
Find the **Settings** area of the page and click **Edit**.
</Step>
<Step>
Select your method of authenticating to Azure DevOps and click either **Account credentials** or **API token**. 

   If you chose **Account credentials**: 

      1. Enter your email address, FleetDM instance URL, and account password in the relevant fields. 

   If you chose **API token**: 

      1. Enter your FleetDM instance URL and API token in the relevant fields. 
</Step>
<Step>
Click **Save**.
</Step>
<Step>
The connector's label changes to **Syncing**, followed by **Connected**. You can view the logs to ensure that information is syncing.
</Step>
</Steps>
**That's it!** Your FleetDM connector is now pulling access data into ConductorOne.
</Tab>

<Tab title="Self-hosted">
**Follow these instructions to use the [FleetDM](https://github.com/ConductorOne/baton-fleetdm) connector, hosted and run in your own environment.**

When running in service mode on Kubernetes, a self-hosted connector maintains an ongoing connection with ConductorOne, automatically syncing and uploading data at regular intervals. This data is immediately available in the ConductorOne UI for access reviews and access requests.

### Step 1: Set up a new FleetDM connector
<Steps>
<Step>
In ConductorOne, navigate to **Connectors** > **Add connector**.
</Step>
<Step>
Search for **Baton** and click **Add**.
</Step>
<Step>
Choose how to set up the new FleetDM connector: 

   - Add the connector to a currently unmanaged app (select from the list of apps that were discovered in your identity, SSO, or federation provider that aren't yet managed with ConductorOne)

   - Add the connector to a managed app (select from the list of existing managed apps)

   - Create a new managed app
</Step>
<Step>
Set the owner for this connector. You can manage the connector yourself, or choose someone else from the list of ConductorOne users. Setting multiple owners is allowed. 

   If you choose someone else, ConductorOne will notify the new connector owner by email that their help is needed to complete the setup process.
</Step>
<Step>
Click **Next**.
</Step>
<Step>
In the **Settings** area of the page, click **Edit**.
</Step>
<Step>
Click **Rotate** to generate a new Client ID and Secret. 

   Carefully copy and save these credentials. We'll use them in Step 2. 
</Step>
</Steps>
### Step 2: Create Kubernetes configuration files

Create two Kubernetes manifest files for your FleetDM connector deployment:

#### Secrets configuration

```yaml expandable
# baton-fleetdm-secrets.yaml
apiVersion: v1
kind: Secret
metadata:
  name: baton-fleetdm-secrets
type: Opaque
stringData:
  # ConductorOne credentials
  BATON_CLIENT_ID: <ConductorOne client ID>
  BATON_CLIENT_SECRET: <ConductorOne client secret>
  
  # FleetDM credentials
  BATON_EMAIL: <Email address for the FleetDM user account>
  BATON_PASSWORD: <Password for the FleetDM user account>
  BATON_INSTANCE_URL: <FleetDM instance URL>
  BATON_TOKEN: <API token for the FleetDM account>

  # Optional: include if you want ConductorOne to provision access using this connector
  BATON_PROVISIONING: true
```

See the connector's README or run `--help` to see all available configuration flags and environment variables.

#### Deployment configuration

```yaml expandable
# baton-fleetdm.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: baton-fleetdm
  labels:
    app: baton-fleetdm
spec:
  selector:
    matchLabels:
      app: baton-fleetdm
  template:
    metadata:
      labels:
        app: baton-fleetdm
        baton: true
        baton-app: fleetdm
    spec:
      containers:
      - name: baton-fleetdm
        image: ghcr.io/conductorone/baton-fleetdm:latest
        imagePullPolicy: IfNotPresent
        env:
        - name: BATON_HOST_ID
          value: baton-fleetdm
        envFrom:
        - secretRef:
            name: baton-fleetdm-secrets
```

### Step 3: Deploy the connector
<Steps>
<Step>
Create a namespace in which to run ConductorOne connectors (if desired), then apply the secret config and deployment config files. 
</Step>
<Step>
Check that the connector data uploaded correctly. In ConductorOne, click **Applications**. On the **Managed apps** tab, locate and click the name of the application you added the FleetDM connector to. FleetDM data should be found on the **Entitlements** and **Accounts** tabs.
</Step>
</Steps>
**That's it!** Your FleetDM connector is now pulling access data into ConductorOne.
</Tab>
</Tabs>



